var page=1;function carregarInfos(){var a=window.location.href,e=`telemedicina=${new URL(a).searchParams.get("telemedicina")}`;$.ajax({url:`${API_URL}/mobile/atendimentos?page=${page}&${e}`,method:"GET",beforeSend:function(a){$(".btn-carregar-infos").html("<i class='fa-solid fa-spinner-third fa-spin'></i>")},success:function(a){if($(".btn-carregar-infos").html("Carregar mais..."),0==a.data.length)return Toast.fire({text:"Nenhum outro atendimento encontrado",icon:"warning"}),!1;1==page&&($(".atendimentos-lista").html(""),$(".atendimentos-lista").removeClass("placeholder-wave")),++page,a.data.forEach((a=>{let e,i="";switch("TELESSAÃšDE"==a.tis_nome&&1==a.sta_id&&(i=`<button class='btn btn-outline-warning btn-sm' data-bs-toggle="modal" data-bs-target="#modalVideoChamada" onclick="initVideo('${a.sala_id}')"><i class='fa-solid fa-video'></i></button>`),a.sta_id){case 1:e="text-success";break;case 2:e="text-info";break;case 3:e="text-purple";break;case 4:e="text-pink";break;case 5:e="text-gray-500";break;case 6:e="text-danger"}$(".atendimentos-lista").append(`\n                    <li>\n                        <div class="item-content">\n                            <a href="/detalhe/atendimento/${a.ate_codigo}" class="item-media">\n                                <i class="fa-solid fa-hospital fa-3x"></i>\n                            </a>\n                            <div class="item-inner">\n                                <div class="item-title-row">\n                                    <div class="item-subtitle">Nome da Unidade</div>\n                                    <h6 class="item-title">\n                                        <a href="/detalhe/atendimento/${a.ate_codigo}">${a.tis_nome}</a>\n                                    </h6>\n                                </div>\n\n                                <div class="d-flex align-items-center mb-2">\n                                    <i class="fa-solid fa-calendar-circle-user"></i>\n                                    <div class="item-price">${moment(a.datahora).format("DD/MM/YYYY HH:mm:ss")}</div>\n                                </div>\n\n                                <div class="d-flex align-items-center">\n                                    <i class="fa-solid fa-user-doctor"></i>\n                                    <div class="item-price">${a.pro_nome}</div>\n                                </div>\n\n\n                                <div class="d-flex align-items-center">\n                                    <i class="fa-solid fa-flag ${e}"></i>\n                                    <div class="item-price">\n                                        <small>${a.sta_nome}</small>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="d-flex mt-2">\n                                <div class="text-end ms-4">\n                                    ${i}\n                                </div>\n                            </div>\n                        </div>\n                    </li>\n                `),i=""}))},error:function(a){$(".atendimentos-lista").html(""),Toast.fire({text:a.responseJSON.message,icon:"error"})}}).done((function(){var a=$(".atendimentos-lista li");$(".main-in").on("keyup",(function(){var e=this.value.trim();""===e?a.show():(a.hide(),a.has("div:icontains("+e+")").show())}))}))}$((()=>{carregarInfos()}));
